@let url = kcContext.url;
@let isAppInitiatedAction = kcContext.isAppInitiatedAction;

<ng-template #headerNode>
  <div class="leading-tight tracking-tight flex flex-col mb-2">
    <span class="text-lg font-bold">{{ i18n.msgStr('updateEmailTitle') }}</span>
  </div>
</ng-template>

<div
  id="kc-form"
  class="mt-6"
>
  <div id="kc-form-wrapper">
    <form
      id="kc-update-email-form"
      method="post"
      [action]="url.loginAction"
    >
      <div class="space-y-4">
        <ng-container [ngComponentOutlet]="userProfileFormFields() ?? null" />
      </div>

      <kc-logout-other-sessions />

      <div class="flex flex-col sm:flex-row gap-3 pt-4">
        <button
          type="submit"
          [disabled]="!isFormSubmittable()"
          matButton="filled"
          class="flex-1 py-2"
          [class.opacity-50]="!isFormSubmittable()"
          [class.cursor-not-allowed]="!isFormSubmittable()"
        >
          {{ i18n.msgStr('doSubmit') }}
        </button>

        @if (isAppInitiatedAction) {
          <button
            type="submit"
            name="cancel-aia"
            value="true"
            matButton="outlined"
            class="flex-1 py-2"
          >
            {{ i18n.msgStr('doCancel') }}
          </button>
        }
      </div>
    </form>
  </div>
</div>
